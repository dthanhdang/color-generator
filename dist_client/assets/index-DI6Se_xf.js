import{l as me,h as Se,j as Fe,r as l,g as je}from"./index-DzOjVrtU.js";import{I as ce}from"./InputBase-D4UDrMQ2.js";const ke={},ue=me((t,e)=>{const r=Se("TextInput",ke,t);return Fe.jsx(ce,{component:"input",ref:e,...r,__staticSelector:"TextInput"})});ue.classes=ce.classes;ue.displayName="@mantine/core/TextInput";function De(t){if(!/^[0-9a-zA-Z-]+$/.test(t))throw new Error(`[@mantine/use-form] Form name "${t}" is invalid, it should contain only letters, numbers and dashes`)}const Oe=typeof window<"u"?l.useLayoutEffect:l.useEffect;function j(t,e){Oe(()=>{if(t)return window.addEventListener(t,e),()=>window.removeEventListener(t,e)},[t])}function Ce(t,e){t&&De(t),j(`mantine-form:${t}:set-field-value`,r=>e.setFieldValue(r.detail.path,r.detail.value)),j(`mantine-form:${t}:set-values`,r=>e.setValues(r.detail)),j(`mantine-form:${t}:set-initial-values`,r=>e.setInitialValues(r.detail)),j(`mantine-form:${t}:set-errors`,r=>e.setErrors(r.detail)),j(`mantine-form:${t}:set-field-error`,r=>e.setFieldError(r.detail.path,r.detail.error)),j(`mantine-form:${t}:clear-field-error`,r=>e.clearFieldError(r.detail)),j(`mantine-form:${t}:clear-errors`,e.clearErrors),j(`mantine-form:${t}:reset`,e.reset),j(`mantine-form:${t}:validate`,e.validate),j(`mantine-form:${t}:validate-field`,r=>e.validateField(r.detail)),j(`mantine-form:${t}:reorder-list-item`,r=>e.reorderListItem(r.detail.path,r.detail.payload)),j(`mantine-form:${t}:remove-list-item`,r=>e.removeListItem(r.detail.path,r.detail.index)),j(`mantine-form:${t}:insert-list-item`,r=>e.insertListItem(r.detail.path,r.detail.item,r.detail.index)),j(`mantine-form:${t}:set-dirty`,r=>e.setDirty(r.detail)),j(`mantine-form:${t}:set-touched`,r=>e.setTouched(r.detail)),j(`mantine-form:${t}:reset-dirty`,r=>e.resetDirty(r.detail)),j(`mantine-form:${t}:reset-touched`,e.resetTouched)}function we(t){return e=>{if(!e)t(e);else if(typeof e=="function")t(e);else if(typeof e=="object"&&"nativeEvent"in e){const{currentTarget:r}=e;r instanceof HTMLInputElement?r.type==="checkbox"?t(r.checked):t(r.value):(r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)&&t(r.value)}else t(e)}}function X(t){return t===null||typeof t!="object"?{}:Object.keys(t).reduce((e,r)=>{const n=t[r];return n!=null&&n!==!1&&(e[r]=n),e},{})}function he(t){const[e,r]=l.useState(X(t)),n=l.useRef(e),s=l.useCallback(u=>{r(f=>{const E=X(typeof u=="function"?u(f):u);return n.current=E,E})},[]),c=l.useCallback(()=>s({}),[]),o=l.useCallback(u=>{n.current[u]!==void 0&&s(f=>{const E={...f};return delete E[u],E})},[e]),a=l.useCallback((u,f)=>{f==null||f===!1?o(u):n.current[u]!==f&&s(E=>({...E,[u]:f}))},[e]);return{errorsState:e,setErrors:s,clearErrors:c,setFieldError:a,clearFieldError:o}}function Z(t,e){if(e===null||typeof e!="object")return{};const r={...e};return Object.keys(e).forEach(n=>{n.includes(`${String(t)}.`)&&delete r[n]}),r}function G(t,e){const r=t.substring(e.length+1).split(".")[0];return parseInt(r,10)}function ee(t,e,r,n){if(e===void 0)return r;const s=`${String(t)}`;let c=r;n===-1&&(c=Z(`${s}.${e}`,c));const o={...c},a=new Set;return Object.entries(c).filter(([u])=>{if(!u.startsWith(`${s}.`))return!1;const f=G(u,s);return Number.isNaN(f)?!1:f>=e}).forEach(([u,f])=>{const E=G(u,s),m=u.replace(`${s}.${E}`,`${s}.${E+n}`);o[m]=f,a.add(m),a.has(u)||delete o[u]}),o}function Te(t,{from:e,to:r},n){const s=`${t}.${e}`,c=`${t}.${r}`,o={...n};return Object.keys(n).every(a=>{let u,f;if(a.startsWith(s)&&(u=a,f=a.replace(s,c)),a.startsWith(c)&&(u=a.replace(c,s),f=a),u&&f){const E=o[u],m=o[f];return m===void 0?delete o[u]:o[u]=m,E===void 0?delete o[f]:o[f]=E,!1}return!0}),o}function te(t,e,r){typeof r.value=="object"&&(r.value=P(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||e==="__proto__"?Object.defineProperty(t,e,r):t[e]=r.value}function P(t){if(typeof t!="object")return t;var e=0,r,n,s,c=Object.prototype.toString.call(t);if(c==="[object Object]"?s=Object.create(t.__proto__||null):c==="[object Array]"?s=Array(t.length):c==="[object Set]"?(s=new Set,t.forEach(function(o){s.add(P(o))})):c==="[object Map]"?(s=new Map,t.forEach(function(o,a){s.set(P(a),P(o))})):c==="[object Date]"?s=new Date(+t):c==="[object RegExp]"?s=new RegExp(t.source,t.flags):c==="[object DataView]"?s=new t.constructor(P(t.buffer)):c==="[object ArrayBuffer]"?s=t.slice(0):c.slice(-6)==="Array]"&&(s=new t.constructor(t)),s){for(n=Object.getOwnPropertySymbols(t);e<n.length;e++)te(s,n[e],Object.getOwnPropertyDescriptor(t,n[e]));for(e=0,n=Object.getOwnPropertyNames(t);e<n.length;e++)Object.hasOwnProperty.call(s,r=n[e])&&s[r]===t[r]||te(s,r,Object.getOwnPropertyDescriptor(t,r))}return s||t}function ie(t){return typeof t!="string"?[]:t.split(".")}function k(t,e){const r=ie(t);if(r.length===0||typeof e!="object"||e===null)return;let n=e[r[0]];for(let s=1;s<r.length&&n!=null;s+=1)n=n[r[s]];return n}function q(t,e,r){const n=ie(t);if(n.length===0)return r;const s=P(r);if(n.length===1)return s[n[0]]=e,s;let c=s[n[0]];for(let o=1;o<n.length-1;o+=1){if(c===void 0)return s;c=c[n[o]]}return c[n[n.length-1]]=e,s}function $e(t,{from:e,to:r},n){const s=k(t,n);if(!Array.isArray(s))return n;const c=[...s],o=s[e];return c.splice(e,1),c.splice(r,0,o),q(t,c,n)}function Ie(t,e,r,n){const s=k(t,n);if(!Array.isArray(s))return n;const c=[...s];return c.splice(typeof r=="number"?r:c.length,0,e),q(t,c,n)}function Re(t,e,r){const n=k(t,r);return Array.isArray(n)?q(t,n.filter((s,c)=>c!==e),r):r}function Ae(t,e,r,n){const s=k(t,n);if(!Array.isArray(s)||s.length<=r)return n;const c=[...s];return c[r]=e,q(t,c,n)}function Le({$values:t,$errors:e,$status:r}){const n=l.useCallback((a,u)=>{r.clearFieldDirty(a),e.setErrors(f=>Te(a,u,f)),t.setValues({values:$e(a,u,t.refValues.current),updateState:!0})},[]),s=l.useCallback((a,u)=>{r.clearFieldDirty(a),e.setErrors(f=>ee(a,u,f,-1)),t.setValues({values:Re(a,u,t.refValues.current),updateState:!0})},[]),c=l.useCallback((a,u,f)=>{r.clearFieldDirty(a),e.setErrors(E=>ee(a,f,E,1)),t.setValues({values:Ie(a,u,f,t.refValues.current),updateState:!0})},[]),o=l.useCallback((a,u,f)=>{r.clearFieldDirty(a),t.setValues({values:Ae(a,f,u,t.refValues.current),updateState:!0})},[]);return{reorderListItem:n,removeListItem:s,insertListItem:c,replaceListItem:o}}var U,re;function Pe(){return re||(re=1,U=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,c;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(c=Object.keys(e),n=c.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,c[s]))return!1;for(s=n;s--!==0;){var o=c[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}),U}var _e=Pe();const K=je(_e);function N(t,e){const r=Object.keys(t);if(typeof e=="string"){const n=r.filter(s=>s.startsWith(`${e}.`));return t[e]||n.some(s=>t[s])||!1}return r.some(n=>t[n])}function ve({initialDirty:t,initialTouched:e,mode:r,$values:n}){const[s,c]=l.useState(e),[o,a]=l.useState(t),u=l.useRef(e),f=l.useRef(t),E=l.useCallback(b=>{const g=typeof b=="function"?b(u.current):b;u.current=g,r==="controlled"&&c(g)},[]),m=l.useCallback((b,g=!1)=>{const S=typeof b=="function"?b(f.current):b;f.current=S,(r==="controlled"||g)&&a(S)},[]),D=l.useCallback(()=>E({}),[]),L=l.useCallback(b=>{const g=b?{...n.refValues.current,...b}:n.refValues.current;n.setValuesSnapshot(g),m({})},[]),_=l.useCallback((b,g)=>{E(S=>N(S,b)===g?S:{...S,[b]:g})},[]),d=l.useCallback((b,g,S)=>{m(w=>N(w,b)===g?w:{...w,[b]:g},S)},[]),y=l.useCallback((b,g)=>{const S=N(f.current,b),w=!K(k(b,n.getValuesSnapshot()),g),A=Z(b,f.current);A[b]=w,m(A,S!==w)},[]),p=l.useCallback(b=>N(u.current,b),[]),h=l.useCallback(b=>m(g=>{if(typeof b!="string")return g;const S=Z(b,g);return delete S[b],K(S,g)?g:S}),[]),O=l.useCallback(b=>{if(b){const S=k(b,f.current);if(typeof S=="boolean")return S;const w=k(b,n.refValues.current),A=k(b,n.valuesSnapshot.current);return!K(w,A)}return Object.keys(f.current).length>0?N(f.current):!K(n.refValues.current,n.valuesSnapshot.current)},[]),I=l.useCallback(()=>f.current,[]),C=l.useCallback(()=>u.current,[]);return{touchedState:s,dirtyState:o,touchedRef:u,dirtyRef:f,setTouched:E,setDirty:m,resetDirty:L,resetTouched:D,isTouched:p,setFieldTouched:_,setFieldDirty:d,setTouchedState:c,setDirtyState:a,clearFieldDirty:h,isDirty:O,getDirty:I,getTouched:C,setCalculatedFieldDirty:y}}function Ne({initialValues:t,onValuesChange:e,mode:r}){const n=l.useRef(!1),[s,c]=l.useState(t||{}),o=l.useRef(s),a=l.useRef(s),u=l.useCallback(({values:d,subscribers:y,updateState:p=!0,mergeWithPreviousValues:h=!0})=>{const O=o.current,I=d instanceof Function?d(o.current):d,C=h?{...O,...I}:I;o.current=C,p&&c(C),e==null||e(C,O),y==null||y.filter(Boolean).forEach(b=>b({updatedValues:C,previousValues:O}))},[e]),f=l.useCallback(d=>{var h;const y=k(d.path,o.current),p=d.value instanceof Function?d.value(y):d.value;if(y!==p){const O=o.current,I=q(d.path,p,o.current);u({values:I,updateState:d.updateState}),(h=d.subscribers)==null||h.filter(Boolean).forEach(C=>C({path:d.path,updatedValues:I,previousValues:O}))}},[u]),E=l.useCallback(d=>{a.current=d},[]),m=l.useCallback((d,y)=>{n.current||(n.current=!0,u({values:d,updateState:r==="controlled"}),E(d),y())},[u]),D=l.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),L=l.useCallback(()=>o.current,[]),_=l.useCallback(()=>a.current,[]);return{initialized:n,stateValues:s,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:f,resetValues:D,setValuesSnapshot:E,initialize:m,getValues:L,getValuesSnapshot:_}}function qe({$status:t}){const e=l.useRef({}),r=l.useCallback((s,c)=>{l.useEffect(()=>(e.current[s]=e.current[s]||[],e.current[s].push(c),()=>{e.current[s]=e.current[s].filter(o=>o!==c)}),[c])},[]),n=l.useCallback(s=>e.current[s]?e.current[s].map(c=>o=>c({previousValue:k(s,o.previousValues),value:k(s,o.updatedValues),touched:t.isTouched(s),dirty:t.isDirty(s)})):[],[]);return{subscribers:e,watch:r,getFieldSubscribers:n}}function se(t,e){return t?`${t}-${e.toString()}`:e.toString()}const W=Symbol("root-rule");function ne(t){const e=X(t);return{hasErrors:Object.keys(e).length>0,errors:e}}function J(t,e,r="",n={}){return typeof t!="object"||t===null?n:Object.keys(t).reduce((s,c)=>{const o=t[c],a=`${r===""?"":`${r}.`}${c}`,u=k(a,e);let f=!1;return typeof o=="function"&&(s[a]=o(u,e,a)),typeof o=="object"&&Array.isArray(u)&&(f=!0,u.forEach((E,m)=>J(o,e,`${a}.${m}`,s)),W in o&&(s[a]=o[W](u,e,a))),typeof o=="object"&&typeof u=="object"&&u!==null&&(f||J(o,e,a,s),W in o&&(s[a]=o[W](u,e,a))),s},n)}function Q(t,e){return ne(typeof t=="function"?t(e):J(t,e))}function B(t,e,r){if(typeof t!="string")return{hasError:!1,error:null};const n=Q(e,r),s=Object.keys(n.errors).find(c=>t.split(".").every((o,a)=>o===c.split(".")[a]));return{hasError:!!s,error:s?n.errors[s]:null}}const Me="__MANTINE_FORM_INDEX__";function oe(t,e){return e?typeof e=="boolean"?e:Array.isArray(e)?e.includes(t.replace(/[.][0-9]+/g,`.${Me}`)):!1:!1}function Be({name:t,mode:e="controlled",initialValues:r,initialErrors:n={},initialDirty:s={},initialTouched:c={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:f,transformValues:E=d=>d,enhanceGetInputProps:m,validate:D,onSubmitPreventDefault:L="always",touchTrigger:_="change"}={}){const d=he(n),y=Ne({initialValues:r,onValuesChange:f,mode:e}),p=ve({initialDirty:s,initialTouched:c,$values:y,mode:e}),h=Le({$values:y,$errors:d,$status:p}),O=qe({$status:p}),[I,C]=l.useState(0),[b,g]=l.useState({}),[S,w]=l.useState(!1),A=l.useCallback(()=>{y.resetValues(),d.clearErrors(),p.resetDirty(),p.resetTouched(),e==="uncontrolled"&&C(i=>i+1)},[]),M=l.useCallback(i=>{o&&d.clearErrors(),e==="uncontrolled"&&C(V=>V+1),Object.keys(O.subscribers.current).forEach(V=>{const F=k(V,y.refValues.current),T=k(V,i);F!==T&&O.getFieldSubscribers(V).forEach(R=>R({previousValues:i,updatedValues:y.refValues.current}))})},[o]),le=l.useCallback(i=>{const V=y.refValues.current;y.initialize(i,()=>e==="uncontrolled"&&C(F=>F+1)),M(V)},[M]),Y=l.useCallback((i,V,F)=>{const T=oe(i,a),R=V instanceof Function?V(k(i,y.refValues.current)):V;p.setCalculatedFieldDirty(i,R),_==="change"&&p.setFieldTouched(i,!0),!T&&o&&d.clearFieldError(i),y.setFieldValue({path:i,value:V,updateState:e==="controlled",subscribers:[...O.getFieldSubscribers(i),T?v=>{const $=B(i,D,v.updatedValues);$.hasError?d.setFieldError(i,$.error):d.clearFieldError(i)}:null,(F==null?void 0:F.forceUpdate)!==!1&&e!=="controlled"?()=>g(v=>({...v,[i]:(v[i]||0)+1})):null]})},[f,D]),ae=l.useCallback(i=>{const V=y.refValues.current;y.setValues({values:i,updateState:e==="controlled"}),M(V)},[f,M]),x=l.useCallback(()=>{const i=Q(D,y.refValues.current);return d.setErrors(i.errors),i},[D]),fe=l.useCallback(i=>{const V=B(i,D,y.refValues.current);return V.hasError?d.setFieldError(i,V.error):d.clearFieldError(i),V},[D]),de=(i,{type:V="input",withError:F=!0,withFocus:T=!0,...R}={})=>{const $={onChange:we(z=>Y(i,z,{forceUpdate:!1})),"data-path":se(t,i)};return F&&($.error=d.errorsState[i]),V==="checkbox"?$[e==="controlled"?"checked":"defaultChecked"]=k(i,y.refValues.current):$[e==="controlled"?"value":"defaultValue"]=k(i,y.refValues.current),T&&($.onFocus=()=>p.setFieldTouched(i,!0),$.onBlur=()=>{if(oe(i,u)){const z=B(i,D,y.refValues.current);z.hasError?d.setFieldError(i,z.error):d.clearFieldError(i)}}),Object.assign($,m==null?void 0:m({inputProps:$,field:i,options:{type:V,withError:F,withFocus:T,...R},form:H}))},ye=(i,V)=>F=>{L==="always"&&(F==null||F.preventDefault());const T=x();if(T.hasErrors)L==="validation-failed"&&(F==null||F.preventDefault()),V==null||V(T.errors,y.refValues.current,F);else{const R=i==null?void 0:i(E(y.refValues.current),F);R instanceof Promise&&(w(!0),R.finally(()=>w(!1)))}},be=i=>E(i||y.refValues.current),Ee=l.useCallback(i=>{i.preventDefault(),A()},[]),Ve=l.useCallback(i=>i?!B(i,D,y.refValues.current).hasError:!Q(D,y.refValues.current).hasErrors,[D]),pe=i=>`${I}-${i}-${b[i]||0}`,ge=l.useCallback(i=>document.querySelector(`[data-path="${se(t,i)}"]`),[]),H={watch:O.watch,initialized:y.initialized.current,values:y.stateValues,getValues:y.getValues,setInitialValues:y.setValuesSnapshot,initialize:le,setValues:ae,setFieldValue:Y,submitting:S,setSubmitting:w,errors:d.errorsState,setErrors:d.setErrors,setFieldError:d.setFieldError,clearFieldError:d.clearFieldError,clearErrors:d.clearErrors,resetDirty:p.resetDirty,setTouched:p.setTouched,setDirty:p.setDirty,isTouched:p.isTouched,resetTouched:p.resetTouched,isDirty:p.isDirty,getTouched:p.getTouched,getDirty:p.getDirty,reorderListItem:h.reorderListItem,insertListItem:h.insertListItem,removeListItem:h.removeListItem,replaceListItem:h.replaceListItem,reset:A,validate:x,validateField:fe,getInputProps:de,onSubmit:ye,onReset:Ee,isValid:Ve,getTransformedValues:be,key:pe,getInputNode:ge};return Ce(t,H),H}function He(t,e){return r=>{const n=t["~standard"].validate(r);if(n instanceof Promise)throw new TypeError("Schema validation must be synchronous");const s={};return n.issues&&[...n.issues].forEach(o=>{o.path&&(s[o.path.map(ze).join(".")]=o.message)}),s}}function ze(t){return typeof t=="object"?t.key:t}export{ue as T,He as s,Be as u};
